(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{512:function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return m})),n.d(e,"b",(function(){return h}));var r=function(t){return!!t||"Please provide some value"},o=function(t){return+t>0||"You have entered an invalid price"},c=function(t){return+t>0||"You have entered an invalid quantity"},l=function(t){return+t>=0||"You have entered an invalid number"};function d(t){return!!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/.exec(t)||"Enter valid email"}function m(t){return void 0!==t&&t.length>=12&&t.length<=15||"Enter valid phone"}function h(t){return t.length>=8||"Enter at least 8 characters"}},565:function(t,e,n){var content=n(625);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("ba2d6d7e",content,!0,{sourceMap:!1})},566:function(t,e,n){var content=n(627);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("21c884d4",content,!0,{sourceMap:!1})},624:function(t,e,n){"use strict";var r=n(565);n.n(r).a},625:function(t,e,n){(e=n(11)(!1)).push([t.i,"",""]),t.exports=e},626:function(t,e,n){"use strict";var r=n(566);n.n(r).a},627:function(t,e,n){(e=n(11)(!1)).push([t.i,".entity-detail-main{height:82vh}.entity-detail-item{height:30%;margin-bottom:10px}.entity-detail-item,.entity-detail-item-detail{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:10px}.entity-detail-item-detail{height:calc(70% - 10px)}.entity-value{color:#bc282b}.negative{color:red}.positive{color:green}.form{width:100%}",""]),t.exports=e},628:function(t,e,n){var content=n(725);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("4614c91a",content,!0,{sourceMap:!1})},661:function(t,e,n){"use strict";n(52);var r=n(14),o=(n(47),n(354),{name:"List",props:{createRoute:{type:String,default:null},updateRoute:{type:String,default:null},deleteRoute:{type:String,default:null},data:{type:Array,default:function(){return[]}},dataColumns:{type:Array,default:function(){return[]}}},data:function(){return{search:!1,searchText:"",error:"",showError:!1}},methods:{closeSearch:function(){this.search=!this.search,this.searchText=""},changeDetailItem:function(t){this.$emit("partyChange",t)},handleCreateEvent:function(){this.$router.push(this.createRoute)},handleUpdateEvent:function(t){this.$router.push(this.updateRoute.replace("$id",t.id))},removeItem:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.console.log(t),!confirm("Are you sure?")){n.next=6;break}return n.next=4,e.$axios.$delete(e.deleteRoute.replace("$id",t.id));case 4:(r=n.sent).error?(e.showError=!0,e.error=r.error):e.$emit("update");case 6:case"end":return n.stop()}}),n)})))()}}}),c=(n(624),n(51)),l=n(68),d=n.n(l),m=n(155),h=n(499),v=n(523),f=n(758),y=n(753),x=n(129),_=n(505),w=n(496),C=n(46),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entity-list-main"},[n("v-data-table",{staticClass:"elevation-1 my-table",attrs:{height:"78vh",headers:t.dataColumns,items:t.data,search:t.searchText,"disable-pagination":"","hide-default-footer":"",dense:""},on:{"click:row":t.changeDetailItem},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[t.search?t._e():n("v-avatar",{attrs:{color:"rgba(233,233,233)",size:"40"},on:{click:function(e){t.search=!t.search}}},[n("v-icon",[t._v("mdi-magnify")])],1),t._v(" "),t.search?t._e():n("v-spacer"),t._v(" "),t.search?t._e():n("v-btn",{staticClass:"mb-2",staticStyle:{"margin-bottom":"0 !important"},attrs:{color:"primary",dark:"",elevation:"0"},on:{click:t.handleCreateEvent}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("New Item")],1),t._v(" "),t.search?n("div",{staticStyle:{width:"100%"}},[n("v-text-field",{attrs:{placeholder:"Search","prepend-inner-icon":"mdi-magnify","append-icon":"mdi-close-circle",outlined:"","hide-details":"",dense:""},on:{"click:append":t.closeSearch},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1):t._e()],1)]},proxy:!0},{key:"item.actions",fn:function(e){var r=e.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"green"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleUpdateEvent(r)}}},[t._v("\n        mdi-pencil\n      ")]),t._v(" "),n("v-icon",{attrs:{color:"red",small:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.removeItem(r)}}},[t._v("\n        mdi-delete\n      ")])]}}])}),t._v(" "),n("v-dialog",{staticStyle:{padding:"20px"},attrs:{width:"50%"},model:{value:t.showError,callback:function(e){t.showError=e},expression:"showError"}},[n("v-card",{staticStyle:{padding:"20px"}},[n("p",{staticStyle:{margin:"0"}},[t._v("Error: "+t._s(t.error))])])],1)],1)}),[],!1,null,"cc7a0d84",null);e.a=component.exports;d()(component,{VAvatar:m.a,VBtn:h.a,VCard:v.a,VDataTable:f.a,VDialog:y.a,VIcon:x.a,VSpacer:_.a,VTextField:w.a,VToolbar:C.a})},662:function(t,e,n){"use strict";n(47),n(52);var r=n(14),o=n(512),c={name:"Detail",props:{party:{type:Object,default:null},detailTitle:{type:String,default:"None"},data:{type:Array,default:function(){return[]}},dataColumns:{type:Array,default:function(){return[]}}},data:function(){return{endpoint:"/productHistory/store",deleteRoute:"/productHistory/delete/$id",readonly:!1,search:"",adjust:!1,adjustType:["Add Stock","Reduce Stock","Opening Stock"],sendData:{adjustType:null,quantity:null,date:null,atPrice:null}}},methods:{required:o.g,openDetail:function(t){this.$emit("openAdjust",t),this.$emit("openSubCategory",t),this.$emit("openProduct",t)},formData:function(){var t=new FormData;return t.append("product_id",this.item.id),t.append("quantity",this.sendData.quantity),t.append("atPrice",this.sendData.atPrice),t.append("actionType",this.sendData.adjustType),t.append("date",this.sendData.date),t},closeDialog:function(t){this.adjust=!this.adjust,this.sendData.adjustType=null,this.sendData.date=null,this.sendData.atPrice=null,this.sendData.quantity=null,this.endpoint="productHistory/store",this.readonly=!1,this.$emit("getProduct",t.data)},update:function(t){this.sendData.quantity=t.quantity,this.sendData.adjustType=this.getType(t.action_type),this.sendData.date=t.date,this.sendData.atPrice=t.value,this.readonly=!0,this.endpoint="/productHistory/update/"+t.id,this.adjust=!0},getType:function(t){switch(t){case 0:return"Add Stock";case 1:return"Reduce Stock";case 2:return"Opening Stock";case 3:return"Sale";case 4:return"Payment In";case 5:return"Sale Return";case 6:return"Purchase Order";case 7:return"Payment Out";case 8:return"Purchase Return"}},removeItem:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.console.log(t),!confirm("Are you sure?")){n.next=6;break}return n.next=4,e.$axios.$delete(e.deleteRoute.replace("$id",t.id));case 4:(r=n.sent).error?(e.showError=!0,e.error=r.error):e.$emit("update");case 6:case"end":return n.stop()}}),n)})))()},toPositive:function(t){return Math.abs(parseInt(t))}}},l=(n(626),n(51)),d=n(68),m=n.n(d),h=n(758),v=n(505),f=n(496),y=n(46),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entity-detail-main"},[t.party?n("div",{staticClass:"entity-detail-item"},[n("div",{staticStyle:{display:"flex",margin:"15px 0"}},[n("p",{staticStyle:{margin:"0"}},[t._v(t._s(t.party.name))])]),t._v(" "),n("div",{staticStyle:{display:"flex"}},[n("div",[n("p",[t._v("\n          Phone:  "),n("span",{staticClass:"entity-value"},[t._v(t._s(t.party.phone))])]),t._v(" "),n("p",[t._v("\n          Email:  "),n("span",{staticClass:"entity-value"},[t._v(t._s(t.party.email))])])]),t._v(" "),n("v-spacer"),t._v(" "),n("div",[n("p",[t._v("\n          Balance: \n          "),t.party.balance?n("span",{staticClass:"entity-value"},[t.party.balance<0?n("span",{staticClass:"negative"},[t._v("Rs. "+t._s(t.toPositive(t.party.balance)))]):n("span",{staticClass:"positive"},[t._v("Rs. "+t._s(t.party.balance))])]):n("span",{staticClass:"entity-value"},[t._v(t._s("Rs. 0.0"))])])])],1)]):t._e(),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{height:"52vh",headers:t.dataColumns,items:t.data,search:t.search,"disable-pagination":"","hide-default-footer":"",dense:""},on:{"click:row":t.openDetail},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("p",[t._v(t._s(t.detailTitle))]),t._v(" "),n("v-spacer"),t._v(" "),n("div",{staticStyle:{width:"250px"}},[n("v-text-field",{attrs:{placeholder:"Search","prepend-inner-icon":"mdi-magnify",outlined:"","hide-details":"",dense:"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)]},proxy:!0},{key:"item.action_type",fn:function(e){var r=e.item;return[n("p",{staticStyle:{margin:"0"}},[t._v("\n        "+t._s(t.getType(r.action_type))+"\n      ")])]}}])})],1)}),[],!1,null,null,null);e.a=component.exports;m()(component,{VDataTable:h.a,VSpacer:v.a,VTextField:f.a,VToolbar:y.a})},724:function(t,e,n){"use strict";var r=n(628);n.n(r).a},725:function(t,e,n){(e=n(11)(!1)).push([t.i,".product-main[data-v-76f04c54]{display:grid;grid-template-columns:calc(25% - 5px) calc(75% - 5px);grid-column-gap:10px;padding:10px}",""]),t.exports=e},764:function(t,e,n){"use strict";n.r(e);n(52);var r=n(14),o=n(661),c={name:"CustomerMain",components:{Detail:n(662).a,List:o.a},data:function(){return{customers:[],customer:null,customerHeader:[{text:"Name",value:"name",width:"50%"},{text:"",value:"actions",width:"10px",sortable:!1,align:"right"}],customerTransactions:[],customerTransactionHeader:[{text:"Type",value:"action_type"},{text:"Date",value:"date"},{text:"Quantity",value:"quantity"},{text:"Total",value:"value"},{text:"Balance",value:"balance"},{text:"Status",value:"status"},{text:"",value:"actions",width:"10px",sortable:!1}]}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCustomers();case 2:case"end":return e.stop()}}),e)})))()},methods:{getCustomer:function(){this.customers.length>0?(this.customer=this.customers[0],this.getCustomerTransactions()):this.customer=null},getCustomerTransactions:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("customer/transactions/"+t.customer.id);case 2:t.customerTransactions=e.sent;case 3:case"end":return e.stop()}}),e)})))()},updateCustomer:function(t){this.customer=t,this.getCustomerTransactions()},getCustomers:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/customer");case 2:t.customers=e.sent,t.getCustomer();case 4:case"end":return e.stop()}}),e)})))()}}},l=(n(724),n(51)),d={name:"Index",middleware:"isAdmin",components:{CustomerMain:Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"product-main"},[n("div",[n("List",{attrs:{data:t.customers,"create-route":"/parties/customer/add","update-route":"/parties/customer/edit/$id","delete-route":"/customer/delete/$id","data-columns":t.customerHeader},on:{partyChange:t.updateCustomer,update:t.getCustomers}})],1),t._v(" "),n("div",[t.customer?n("Detail",{attrs:{party:t.customer,"detail-title":"Transactions",data:t.customerTransactions,"data-columns":t.customerTransactionHeader}}):t._e()],1)])])}),[],!1,null,"76f04c54",null).exports}},m=Object(l.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("CustomerMain")}),[],!1,null,"59717b1e",null);e.default=m.exports}}]);