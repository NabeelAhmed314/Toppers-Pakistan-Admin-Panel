(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{511:function(t,e,n){"use strict";n.d(e,"g",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return f}));var r=function(t){return!!t||"Please provide some value"},o=function(t){return+t>0||"You have entered an invalid price"},l=function(t){return+t>0||"You have entered an invalid quantity"},c=function(t){return+t>=0||"You have entered an invalid number"};function d(t){return!!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/.exec(t)||"Enter valid email"}function v(t){return void 0!==t&&t.length>=12&&t.length<=15||"Enter valid phone"}function f(t){return t.length>=8||"Enter at least 8 characters"}},534:function(t,e,n){"use strict";n(18);var r=n(2);e.a=r.a.extend().extend({name:"delayable",props:{openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0}},data:function(){return{openTimeout:void 0,closeTimeout:void 0}},methods:{clearDelay:function(){clearTimeout(this.openTimeout),clearTimeout(this.closeTimeout)},runDelay:function(t,e){var n=this;this.clearDelay();var r=parseInt(this["".concat(t,"Delay")],10);this["".concat(t,"Timeout")]=setTimeout(e||function(){n.isActive={open:!0,close:!1}[t]},r)}}})},536:function(t,e,n){var content=n(537);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("5c8fbe94",content,!0,{sourceMap:!1})},537:function(t,e,n){(e=n(11)(!1)).push([t.i,".v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{padding-top:2px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}",""]),t.exports=e},545:function(t,e,n){"use strict";n(26),n(8),n(5),n(10);var r=n(16),o=(n(34),n(37),n(534)),l=n(41),c=n(6),d=n(1),v=n(7),f=Object(c.a)(o.a,l.a);e.a=f.extend({name:"activatable",props:{activator:{default:null,validator:function(t){return["string","object"].includes(Object(r.a)(t))}},disabled:Boolean,internalActivator:Boolean,openOnHover:Boolean,openOnFocus:Boolean},data:function(){return{activatorElement:null,activatorNode:[],events:["click","mouseenter","mouseleave","focus"],listeners:{}}},watch:{activator:"resetActivator",openOnFocus:"resetActivator",openOnHover:"resetActivator"},mounted:function(){var t=Object(d.s)(this,"activator",!0);t&&["v-slot","normal"].includes(t)&&Object(v.b)('The activator slot must be bound, try \'<template v-slot:activator="{ on }"><v-btn v-on="on">\'',this),this.addActivatorEvents()},beforeDestroy:function(){this.removeActivatorEvents()},methods:{addActivatorEvents:function(){if(this.activator&&!this.disabled&&this.getActivator()){this.listeners=this.genActivatorListeners();for(var t=0,e=Object.keys(this.listeners);t<e.length;t++){var n=e[t];this.getActivator().addEventListener(n,this.listeners[n])}}},genActivator:function(){var t=Object(d.r)(this,"activator",Object.assign(this.getValueProxy(),{on:this.genActivatorListeners(),attrs:this.genActivatorAttributes()}))||[];return this.activatorNode=t,t},genActivatorAttributes:function(){return{role:"button","aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genActivatorListeners:function(){var t=this;if(this.disabled)return{};var e={};return this.openOnHover?(e.mouseenter=function(e){t.getActivator(e),t.runDelay("open")},e.mouseleave=function(e){t.getActivator(e),t.runDelay("close")}):e.click=function(e){var n=t.getActivator(e);n&&n.focus(),e.stopPropagation(),t.isActive=!t.isActive},this.openOnFocus&&(e.focus=function(e){t.getActivator(e),e.stopPropagation(),t.isActive=!t.isActive}),e},getActivator:function(t){if(this.activatorElement)return this.activatorElement;var e=null;if(this.activator){var n=this.internalActivator?this.$el:document;e="string"==typeof this.activator?n.querySelector(this.activator):this.activator.$el?this.activator.$el:this.activator}else if(1===this.activatorNode.length||this.activatorNode.length&&!t){var r=this.activatorNode[0].componentInstance;e=r&&r.$options.mixins&&r.$options.mixins.some((function(t){return t.options&&["activatable","menuable"].includes(t.options.name)}))?r.getActivator():this.activatorNode[0].elm}else t&&(e=t.currentTarget||t.target);return this.activatorElement=e,this.activatorElement},getContentSlot:function(){return Object(d.r)(this,"default",this.getValueProxy(),!0)},getValueProxy:function(){var t=this;return{get value(){return t.isActive},set value(e){t.isActive=e}}},removeActivatorEvents:function(){if(this.activator&&this.activatorElement){for(var t=0,e=Object.keys(this.listeners);t<e.length;t++){var n=e[t];this.activatorElement.removeEventListener(n,this.listeners[n])}this.listeners={}}},resetActivator:function(){this.removeActivatorEvents(),this.activatorElement=null,this.getActivator(),this.addActivatorEvents()}}})},547:function(t,e,n){"use strict";var r=n(4),o=n(16),l=n(163),c=n(1),d=n(6),v=n(7);e.a=Object(d.a)(l.a).extend({name:"detachable",props:{attach:{default:!1,validator:function(t){var e=Object(o.a)(t);return"boolean"===e||"string"===e||t.nodeType===Node.ELEMENT_NODE}},contentClass:{type:String,default:""}},data:function(){return{activatorNode:null,hasDetached:!1}},watch:{attach:function(){this.hasDetached=!1,this.initDetach()},hasContent:function(){this.$nextTick(this.initDetach)}},beforeMount:function(){var t=this;this.$nextTick((function(){t.activatorNode&&(Array.isArray(t.activatorNode)?t.activatorNode:[t.activatorNode]).forEach((function(e){if(e.elm&&t.$el.parentNode){var n=t.$el===t.$el.parentNode.firstChild?t.$el:t.$el.nextSibling;t.$el.parentNode.insertBefore(e.elm,n)}}))}))},mounted:function(){this.hasContent&&this.initDetach()},deactivated:function(){this.isActive=!1},beforeDestroy:function(){try{if(this.$refs.content&&this.$refs.content.parentNode&&this.$refs.content.parentNode.removeChild(this.$refs.content),this.activatorNode)(Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode]).forEach((function(t){t.elm&&t.elm.parentNode&&t.elm.parentNode.removeChild(t.elm)}))}catch(t){console.log(t)}},methods:{getScopeIdAttrs:function(){var t=Object(c.o)(this.$vnode,"context.$options._scopeId");return t&&Object(r.a)({},t,"")},initDetach:function(){var t;this._isDestroyed||!this.$refs.content||this.hasDetached||""===this.attach||!0===this.attach||"attach"===this.attach||((t=!1===this.attach?document.querySelector("[data-app]"):"string"==typeof this.attach?document.querySelector(this.attach):this.attach)?(t.appendChild(this.$refs.content),this.hasDetached=!0):Object(v.c)("Unable to locate target ".concat(this.attach||"[data-app]"),this))}}})},549:function(t,e,n){"use strict";n(34),n(37);var r=n(100),o=n(2),l=n(1);e.a=o.a.extend().extend({name:"stackable",data:function(){return{stackElement:null,stackExclude:null,stackMinZIndex:0,isActive:!1}},computed:{activeZIndex:function(){if("undefined"==typeof window)return 0;var content=this.stackElement||this.$refs.content,t=this.isActive?this.getMaxZIndex(this.stackExclude||[content])+2:Object(l.t)(content);return null==t?t:parseInt(t)}},methods:{getMaxZIndex:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],base=this.$el,e=[this.stackMinZIndex,Object(l.t)(base)],n=[].concat(Object(r.a)(document.getElementsByClassName("v-menu__content--active")),Object(r.a)(document.getElementsByClassName("v-dialog__content--active"))),o=0;o<n.length;o++)t.includes(n[o])||e.push(Object(l.t)(n[o]));return Math.max.apply(Math,e)}}})},550:function(t,e,n){"use strict";var r=n(2);e.a=r.a.extend({name:"returnable",props:{returnValue:null},data:function(){return{isActive:!1,originalValue:null}},watch:{isActive:function(t){t?this.originalValue=this.returnValue:this.$emit("update:return-value",this.originalValue)}},methods:{save:function(t){var e=this;this.originalValue=t,setTimeout((function(){e.isActive=!1}))}}})},555:function(t,e,n){"use strict";n(99);var r=n(15);e.a=r.a.extend({name:"v-theme-provider",props:{root:Boolean},computed:{isDark:function(){return this.root?this.rootIsDark:r.a.options.computed.isDark.call(this)}},render:function(){return this.$slots.default&&this.$slots.default.find((function(t){return!t.isComment&&" "!==t.text}))}})},556:function(t,e,n){"use strict";n(13),n(9),n(8),n(5),n(10);var r=n(4),o=(n(18),n(536),n(496)),l=n(6);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d=Object(l.a)(o.a);e.a=d.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},o.a.options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var input=this.$refs.input;if(input){input.style.height="0";var t=input.scrollHeight,e=parseInt(this.rows,10)*parseFloat(this.rowHeight);input.style.height=Math.max(e,t)+"px"}},genInput:function(){var input=o.a.options.methods.genInput.call(this);return input.tag="textarea",delete input.data.attrs.type,input.data.attrs.rows=this.rows,input},onInput:function(t){o.a.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},648:function(t,e,n){var content=n(759);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("eaf207b8",content,!0,{sourceMap:!1})},758:function(t,e,n){"use strict";var r=n(648);n.n(r).a},759:function(t,e,n){(e=n(11)(!1)).push([t.i,".sale-order-customer{display:flex;background-color:#fcfcfc;border-bottom:1px solid rgba(0,0,0,.2)}.sale-order-customer-form{width:40%;padding:20px}.sale-order-customer-invoice{width:30%;padding:20px;margin:0 20px 0 0}.sale-order-total{display:flex;padding:20px 40px}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none}input[type=number]{-moz-appearance:textfield}.variantField{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:10px}",""]),t.exports=e},796:function(t,e,n){"use strict";n.r(e);n(8),n(43),n(9),n(40),n(42),n(22),n(23),n(5),n(26),n(52);var r=n(14),o=n(0),l=n.n(o),c=n(511);function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f={name:"FormSaleOrder",data:function(){return{selectedProducts:[{product:null,qty:1,unit:null,price:null,amount:null,variant:null,variants:[]}],searchCustomer:"",branches:[],branch:null,products:[],variants:[],customers:[],customer:null,billingName:null,billingAddress:null,invoiceNumber:null,invoiceDate:null,type:!1,total:null,received:null,discount:null,balance:null,columns:[{text:"#",value:"count",width:"50px",sortable:!1},{text:"Product",value:"product",width:"500px",sortable:!1},{text:"Qty",value:"qty",width:"100px",sortable:!1},{text:"Unit",value:"unit",sortable:!1},{text:"Price/Unit",value:"price",sortable:!1},{text:"Amount",value:"amount",sortable:!1},{text:"",value:"actions",sortable:!1,width:"50px"}]}},mounted:function(){"Sub Admin"===this.$auth.user.type&&(this.branch=this.$auth.user.branch_id,this.getProducts(this.branch)),this.getBranches(),this.getCustomers(),this.getInvoiceNumber()},methods:{required:c.g,quantity:c.f,addItem:function(){this.selectedProducts.push({product:null,qty:1,unit:null,price:null,amount:null,variant:null,variants:[]})},getBranches:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("branch");case 2:t.branches=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getCustomers:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("customer");case 2:t.customers=e.sent;case 3:case"end":return e.stop()}}),e)})))()},getInvoiceNumber:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("saleOrder/getInvoice");case 2:t.invoiceNumber=e.sent,t.invoiceDate=l()().format("YYYY-MM-DD");case 4:case"end":return e.stop()}}),e)})))()},getProducts:function(i){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("item/filter/"+i);case 2:t.products=e.sent;case 3:case"end":return e.stop()}}),e)})))()},selectCustomer:function(i){this.customer=i,this.billingName=i.name},saveCustomer:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.searchCustomer){e.next=8;break}return n={name:t.searchCustomer},e.next=4,t.$axios.$post("customer/store",n);case 4:return r=e.sent,e.next=7,t.getCustomers();case 7:t.selectCustomer(r);case 8:case"end":return e.stop()}}),e)})))()},productChanged:function(i,t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.selectedProducts.indexOf(t),e.selectedProducts[r].variant=null,n.next=4,e.$axios.$get("order/variant/item/"+i.id);case 4:e.selectedProducts[r].variants=n.sent,e.selectedProducts[r].variants.length>0?(e.selectedProducts[r].variant=e.selectedProducts[r].variants[0],e.selectedProducts[r].price=e.selectedProducts[r].variant.sale_price):(e.selectedProducts[r].variant=null,e.selectedProducts[r].price=i.sale_price),e.selectedProducts[r].product=i,e.selectedProducts[r].unit=i.unit.name,e.selectedProducts[r].amount=e.selectedProducts[r].price*e.selectedProducts[r].qty,e.getTotal(),e.checkBalance();case 11:case"end":return n.stop()}}),n)})))()},quantityChanged:function(t){var e=this.selectedProducts.indexOf(t);this.selectedProducts[e].amount=this.selectedProducts[e].price*this.selectedProducts[e].qty,this.getTotal(),this.checkBalance()},variantChanged:function(t){var e=this.selectedProducts.indexOf(t);this.selectedProducts[e].price=this.selectedProducts[e].variant.sale_price,this.selectedProducts[e].amount=this.selectedProducts[e].price*this.selectedProducts[e].qty,this.getTotal(),this.checkBalance()},removeItem:function(t){var e=this.selectedProducts.indexOf(t);this.selectedProducts.length>1&&this.selectedProducts.splice(e,1),this.getTotal(),this.checkBalance()},getTotal:function(){var t,e=0,n=d(this.selectedProducts);try{for(n.s();!(t=n.n()).done;){var r=t.value;e+=parseInt(r.amount)}}catch(t){n.e(t)}finally{n.f()}this.total=e},checkBalance:function(){this.balance=this.total-this.received},discountApply:function(){this.getTotal(),this.total=this.total-this.discount},formData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=17;break}(data={}).customer=t.customer?t.customer.id:null,data.billingAddress=t.billingAddress,data.invoiceNumber=t.invoiceNumber,data.invoiceDate=t.invoiceDate,data.branchId=t.branch,data.type=t.type?"Credit":"Cash",data.amount=t.total,t.discount&&(data.discount=t.discount),t.type&&(data.balance=t.balance),data.items=[],n=d(t.selectedProducts);try{for(n.s();!(r=n.n()).done;)o=r.value,data.items.push({item:o})}catch(t){n.e(t)}finally{n.f()}return e.next=16,t.$axios.$post("saleOrder/store",data);case 16:t.$router.back();case 17:case"end":return e.stop()}}),e)})))()}}},x=(n(758),n(51)),h=n(68),m=n.n(h),y=n(548),_=n(499),w=n(775),A=n(531),k=n(129),O=n(505),P=n(772),$=n(496),S=n(556),C=n(46),component=Object(x.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sale-order-main"},[n("v-form",{ref:"form"},[n("div",{staticClass:"sale-order-customer"},[n("div",{staticClass:"sale-order-customer-form"},[n("div",{staticClass:"sale-order-customer-name"},[n("v-autocomplete",{staticStyle:{margin:"0 3px",width:"calc(60% - 3px)"},attrs:{outlined:"",dense:"",flat:"","search-input":t.searchCustomer,"value-comparator":function(a,b){return a&&b&&a.id===b.id},rules:[!t.type||t.required],label:t.type?"Customer *":"Customer (Optional)",items:t.customers,"item-text":"name",hint:t.customer?t.customer.balance?"Bal: "+t.customer.balance:"Bal: 0.0":"","persistent-hint":"","item-value":function(t){return t}},on:{"update:searchInput":function(e){t.searchCustomer=e},"update:search-input":function(e){t.searchCustomer=e},change:function(e){return t.selectCustomer(e)}},scopedSlots:t._u([{key:"no-data",fn:function(){return[n("span",[n("p",{staticStyle:{margin:"0 5px 0 0","text-align":"right",cursor:"pointer"},on:{click:t.saveCustomer}},[n("v-icon",[t._v("mdi-plus-circle")]),t._v("\n                  Add Party\n                ")],1)])]},proxy:!0}]),model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1),t._v(" "),n("div",{staticClass:"sale-order-customer-address"},[n("v-textarea",{staticStyle:{margin:"0 3px",width:"calc(60% - 3px)"},attrs:{label:"Billing Address","hide-details":"",rows:"3",dense:"",outlined:""},model:{value:t.billingAddress,callback:function(e){t.billingAddress=e},expression:"billingAddress"}})],1)]),t._v(" "),n("v-spacer"),t._v(" "),n("div",{staticClass:"sale-order-customer-invoice"},[n("div",{staticStyle:{display:"flex"}},[n("label",{staticStyle:{width:"50%"}},[t._v("Invoice Number")]),t._v(" "),n("v-text-field",{staticStyle:{margin:"0"},attrs:{readonly:"",dense:""},model:{value:t.invoiceNumber,callback:function(e){t.invoiceNumber=e},expression:"invoiceNumber"}})],1),t._v(" "),n("div",{staticStyle:{display:"flex"}},[n("label",{staticStyle:{width:"50%"}},[t._v("Invoice Date")]),t._v(" "),n("v-text-field",{staticStyle:{margin:"0"},attrs:{rules:[t.required],dense:"",type:"date"},model:{value:t.invoiceDate,callback:function(e){t.invoiceDate=e},expression:"invoiceDate"}})],1),t._v(" "),n("v-autocomplete",{attrs:{dense:"",rules:[t.required],items:t.branches,"item-text":"name","item-value":"id",label:"Branch",readonly:"Sub Admin"===t.$auth.user.type,placeholder:"Search a Branch"},on:{change:function(e){t.getProducts(e)}},model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}})],1)],1),t._v(" "),n("div",{staticClass:"sale-order-items"},[n("v-data-table",{attrs:{headers:t.columns,items:t.selectedProducts,"disable-pagination":"","hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-switch",{attrs:{label:t.type?"Credit":"Cash","hide-details":""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mb-2",staticStyle:{"margin-bottom":"0 !important"},attrs:{color:"primary",dark:"",elevation:"0"},on:{click:t.addItem}},[t._v("Add Item")])],1)]},proxy:!0},{key:"item.count",fn:function(e){var r=e.item;return[n("p",{staticStyle:{margin:"0"}},[t._v(t._s(t.selectedProducts.indexOf(r)+1))])]}},{key:"item.actions",fn:function(e){var r=e.item;return[t.selectedProducts.length>1?n("v-icon",{attrs:{color:"red"},on:{click:function(e){return t.removeItem(r)}}},[t._v("mdi-delete")]):t._e()]}},{key:"item.product",fn:function(e){var r=e.item;return[n("div",{class:{variantField:r.variants.length>0}},[n("v-autocomplete",{attrs:{outlined:"",dense:"",rules:[t.required],"hide-details":"",flat:"",items:t.products,"item-text":"name","item-value":function(t){return t}},on:{change:function(e){return t.productChanged(e,r)}},scopedSlots:t._u([{key:"no-data",fn:function(){return[n("p",{staticStyle:{margin:"0","text-align":"center"}},[t._v("\n                  "+t._s(t.branch?"No Products Found":"Please Select Branch First")+"\n                ")])]},proxy:!0}],null,!0)}),t._v(" "),r.variants.length>0?n("v-autocomplete",{attrs:{outlined:"",dense:"",rules:[t.required],"hide-details":"",flat:"",items:r.variants,"item-text":"name","item-value":function(t){return t}},on:{change:function(e){return t.variantChanged(r)}},model:{value:r.variant,callback:function(e){t.$set(r,"variant",e)},expression:"item.variant"}}):t._e()],1)]}},{key:"item.qty",fn:function(e){var r=e.item;return[n("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",rules:[t.required,t.quantity]},on:{change:function(e){return t.quantityChanged(r)}},model:{value:r.qty,callback:function(e){t.$set(r,"qty",e)},expression:"item.qty"}})]}}])})],1),t._v(" "),n("div",{staticClass:"sale-order-total"},[n("v-spacer"),t._v(" "),n("div",{staticStyle:{width:"30%"}},[n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr","margin-bottom":"5px"}},[n("label",[t._v("Total")]),t._v(" "),n("v-text-field",{attrs:{readonly:"",outlined:"",dense:"","hide-details":"",placeholder:"0.0"},model:{value:t.total,callback:function(e){t.total=e},expression:"total"}})],1),t._v(" "),n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr","margin-bottom":"5px"}},[n("label",[t._v("Discount")]),t._v(" "),n("v-text-field",{attrs:{outlined:"",dense:"","hide-details":"",placeholder:"0.0"},on:{change:t.discountApply},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}})],1),t._v(" "),t.type?n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr","margin-bottom":"5px"}},[n("label",[t._v("Received")]),t._v(" "),n("v-text-field",{attrs:{outlined:"",dense:"","hide-details":"",placeholder:"0.0"},on:{change:t.checkBalance},model:{value:t.received,callback:function(e){t.received=e},expression:"received"}})],1):t._e(),t._v(" "),t.type?n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr","margin-bottom":"5px"}},[n("label",[t._v("Balance")]),t._v(" "),n("v-text-field",{attrs:{readonly:"",outlined:"",dense:"","hide-details":"",placeholder:"0.0"},model:{value:t.balance,callback:function(e){t.balance=e},expression:"balance"}})],1):t._e()])],1),t._v(" "),n("v-toolbar",{attrs:{flat:"",dense:""}},[n("div"),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mb-2",staticStyle:{"margin-bottom":"0 !important"},attrs:{color:"primary",dark:"",elevation:"0"},on:{click:t.formData}},[t._v("Submit")])],1)],1)],1)}),[],!1,null,null,null),N=component.exports;m()(component,{VAutocomplete:y.a,VBtn:_.a,VDataTable:w.a,VForm:A.a,VIcon:k.a,VSpacer:O.a,VSwitch:P.a,VTextField:$.a,VTextarea:S.a,VToolbar:C.a});var j={name:"AddSaleOrder",components:{FormSaleOrder:N}},D=Object(x.a)(j,(function(){var t=this.$createElement;return(this._self._c||t)("FormSaleOrder")}),[],!1,null,"079c6614",null);e.default=D.exports}}]);