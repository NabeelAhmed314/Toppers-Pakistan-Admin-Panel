(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{512:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return f}));var r=function(e){return!!e||"Please provide some value"},o=function(e){return+e>0||"You have entered an invalid price"},l=function(e){return+e>0||"You have entered an invalid quantity"},c=function(e){return+e>=0||"You have entered an invalid number"};function d(e){return!!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/.exec(e)||"Enter valid email"}function v(e){return void 0!==e&&e.length>=12&&e.length<=15||"Enter valid phone"}function f(e){return e.length>=8||"Enter at least 8 characters"}},531:function(e,t,n){var content=n(532);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("5c8fbe94",content,!0,{sourceMap:!1})},532:function(e,t,n){(t=n(11)(!1)).push([e.i,".v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{padding-top:2px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}",""]),e.exports=t},534:function(e,t,n){"use strict";n(18);var r=n(2);t.a=r.a.extend().extend({name:"delayable",props:{openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0}},data:function(){return{openTimeout:void 0,closeTimeout:void 0}},methods:{clearDelay:function(){clearTimeout(this.openTimeout),clearTimeout(this.closeTimeout)},runDelay:function(e,t){var n=this;this.clearDelay();var r=parseInt(this["".concat(e,"Delay")],10);this["".concat(e,"Timeout")]=setTimeout(t||function(){n.isActive={open:!0,close:!1}[e]},r)}}})},551:function(e,t,n){"use strict";n(26),n(8),n(5),n(10);var r=n(16),o=(n(34),n(37),n(534)),l=n(41),c=n(6),d=n(1),v=n(7),f=Object(c.a)(o.a,l.a);t.a=f.extend({name:"activatable",props:{activator:{default:null,validator:function(e){return["string","object"].includes(Object(r.a)(e))}},disabled:Boolean,internalActivator:Boolean,openOnHover:Boolean,openOnFocus:Boolean},data:function(){return{activatorElement:null,activatorNode:[],events:["click","mouseenter","mouseleave","focus"],listeners:{}}},watch:{activator:"resetActivator",openOnFocus:"resetActivator",openOnHover:"resetActivator"},mounted:function(){var e=Object(d.s)(this,"activator",!0);e&&["v-slot","normal"].includes(e)&&Object(v.b)('The activator slot must be bound, try \'<template v-slot:activator="{ on }"><v-btn v-on="on">\'',this),this.addActivatorEvents()},beforeDestroy:function(){this.removeActivatorEvents()},methods:{addActivatorEvents:function(){if(this.activator&&!this.disabled&&this.getActivator()){this.listeners=this.genActivatorListeners();for(var e=0,t=Object.keys(this.listeners);e<t.length;e++){var n=t[e];this.getActivator().addEventListener(n,this.listeners[n])}}},genActivator:function(){var e=Object(d.r)(this,"activator",Object.assign(this.getValueProxy(),{on:this.genActivatorListeners(),attrs:this.genActivatorAttributes()}))||[];return this.activatorNode=e,e},genActivatorAttributes:function(){return{role:"button","aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genActivatorListeners:function(){var e=this;if(this.disabled)return{};var t={};return this.openOnHover?(t.mouseenter=function(t){e.getActivator(t),e.runDelay("open")},t.mouseleave=function(t){e.getActivator(t),e.runDelay("close")}):t.click=function(t){var n=e.getActivator(t);n&&n.focus(),t.stopPropagation(),e.isActive=!e.isActive},this.openOnFocus&&(t.focus=function(t){e.getActivator(t),t.stopPropagation(),e.isActive=!e.isActive}),t},getActivator:function(e){if(this.activatorElement)return this.activatorElement;var t=null;if(this.activator){var n=this.internalActivator?this.$el:document;t="string"==typeof this.activator?n.querySelector(this.activator):this.activator.$el?this.activator.$el:this.activator}else if(1===this.activatorNode.length||this.activatorNode.length&&!e){var r=this.activatorNode[0].componentInstance;t=r&&r.$options.mixins&&r.$options.mixins.some((function(e){return e.options&&["activatable","menuable"].includes(e.options.name)}))?r.getActivator():this.activatorNode[0].elm}else e&&(t=e.currentTarget||e.target);return this.activatorElement=t,this.activatorElement},getContentSlot:function(){return Object(d.r)(this,"default",this.getValueProxy(),!0)},getValueProxy:function(){var e=this;return{get value(){return e.isActive},set value(t){e.isActive=t}}},removeActivatorEvents:function(){if(this.activator&&this.activatorElement){for(var e=0,t=Object.keys(this.listeners);e<t.length;e++){var n=t[e];this.activatorElement.removeEventListener(n,this.listeners[n])}this.listeners={}}},resetActivator:function(){this.removeActivatorEvents(),this.activatorElement=null,this.getActivator(),this.addActivatorEvents()}}})},552:function(e,t,n){"use strict";var r=n(4),o=n(16),l=n(161),c=n(1),d=n(6),v=n(7);t.a=Object(d.a)(l.a).extend({name:"detachable",props:{attach:{default:!1,validator:function(e){var t=Object(o.a)(e);return"boolean"===t||"string"===t||e.nodeType===Node.ELEMENT_NODE}},contentClass:{type:String,default:""}},data:function(){return{activatorNode:null,hasDetached:!1}},watch:{attach:function(){this.hasDetached=!1,this.initDetach()},hasContent:function(){this.$nextTick(this.initDetach)}},beforeMount:function(){var e=this;this.$nextTick((function(){e.activatorNode&&(Array.isArray(e.activatorNode)?e.activatorNode:[e.activatorNode]).forEach((function(t){if(t.elm&&e.$el.parentNode){var n=e.$el===e.$el.parentNode.firstChild?e.$el:e.$el.nextSibling;e.$el.parentNode.insertBefore(t.elm,n)}}))}))},mounted:function(){this.hasContent&&this.initDetach()},deactivated:function(){this.isActive=!1},beforeDestroy:function(){try{if(this.$refs.content&&this.$refs.content.parentNode&&this.$refs.content.parentNode.removeChild(this.$refs.content),this.activatorNode)(Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode]).forEach((function(e){e.elm&&e.elm.parentNode&&e.elm.parentNode.removeChild(e.elm)}))}catch(e){console.log(e)}},methods:{getScopeIdAttrs:function(){var e=Object(c.o)(this.$vnode,"context.$options._scopeId");return e&&Object(r.a)({},e,"")},initDetach:function(){var e;this._isDestroyed||!this.$refs.content||this.hasDetached||""===this.attach||!0===this.attach||"attach"===this.attach||((e=!1===this.attach?document.querySelector("[data-app]"):"string"==typeof this.attach?document.querySelector(this.attach):this.attach)?(e.appendChild(this.$refs.content),this.hasDetached=!0):Object(v.c)("Unable to locate target ".concat(this.attach||"[data-app]"),this))}}})},553:function(e,t,n){"use strict";n(34),n(37);var r=n(100),o=n(2),l=n(1);t.a=o.a.extend().extend({name:"stackable",data:function(){return{stackElement:null,stackExclude:null,stackMinZIndex:0,isActive:!1}},computed:{activeZIndex:function(){if("undefined"==typeof window)return 0;var content=this.stackElement||this.$refs.content,e=this.isActive?this.getMaxZIndex(this.stackExclude||[content])+2:Object(l.t)(content);return null==e?e:parseInt(e)}},methods:{getMaxZIndex:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],base=this.$el,t=[this.stackMinZIndex,Object(l.t)(base)],n=[].concat(Object(r.a)(document.getElementsByClassName("v-menu__content--active")),Object(r.a)(document.getElementsByClassName("v-dialog__content--active"))),o=0;o<n.length;o++)e.includes(n[o])||t.push(Object(l.t)(n[o]));return Math.max.apply(Math,t)}}})},554:function(e,t,n){"use strict";var r=n(2);t.a=r.a.extend({name:"returnable",props:{returnValue:null},data:function(){return{isActive:!1,originalValue:null}},watch:{isActive:function(e){e?this.originalValue=this.returnValue:this.$emit("update:return-value",this.originalValue)}},methods:{save:function(e){var t=this;this.originalValue=e,setTimeout((function(){t.isActive=!1}))}}})},555:function(e,t,n){"use strict";n(13),n(9),n(8),n(5),n(10);var r=n(4),o=(n(18),n(531),n(496)),l=n(6);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d=Object(l.a)(o.a);t.a=d.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},o.a.options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var input=this.$refs.input;if(input){input.style.height="0";var e=input.scrollHeight,t=parseInt(this.rows,10)*parseFloat(this.rowHeight);input.style.height=Math.max(t,e)+"px"}},genInput:function(){var input=o.a.options.methods.genInput.call(this);return input.tag="textarea",delete input.data.attrs.type,input.data.attrs.rows=this.rows,input},onInput:function(e){o.a.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},558:function(e,t,n){"use strict";n(99);var r=n(15);t.a=r.a.extend({name:"v-theme-provider",props:{root:Boolean},computed:{isDark:function(){return this.root?this.rootIsDark:r.a.options.computed.isDark.call(this)}},render:function(){return this.$slots.default&&this.$slots.default.find((function(e){return!e.isComment&&" "!==e.text}))}})},648:function(e,t,n){var content=n(747);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("9f4c3c60",content,!0,{sourceMap:!1})},746:function(e,t,n){"use strict";var r=n(648);n.n(r).a},747:function(e,t,n){(t=n(11)(!1)).push([e.i,".sale-order-customer{display:flex;background-color:#fcfcfc;border-bottom:1px solid rgba(0,0,0,.2)}.sale-order-customer-form{width:40%;padding:20px}.sale-order-customer-invoice{width:30%;padding:20px;margin:0 20px 0 0}.sale-order-total{display:flex;padding:20px 40px}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none}input[type=number]{-moz-appearance:textfield}.variantField{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:10px}",""]),e.exports=t},775:function(e,t,n){"use strict";n.r(t);n(52);var r=n(14),o=(n(8),n(43),n(9),n(22),n(23),n(5),n(26),n(40),n(42),n(512));function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,d=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){d=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(d)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var d={name:"EditSaleOrder",props:{order:{type:Object,default:null},selectedProducts:{type:Array,default:function(){return[]}}},data:function(){return{branches:[],products:[],customers:[],type:!1,total:null,received:null,balance:null,discount:null,columns:[{text:"#",value:"count",width:"50px",sortable:!1},{text:"Product",value:"product",width:"500px",sortable:!1},{text:"Qty",value:"qty",width:"100px",sortable:!1},{text:"Unit",value:"product.unit.name",sortable:!1},{text:"Price/Unit",value:"price",sortable:!1},{text:"Amount",value:"amount",sortable:!1},{text:"",value:"actions",sortable:!1,width:"50px"}]}},mounted:function(){this.getBranches(),this.getCustomers(),this.getProducts(this.order.branch_id)},beforeMount:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setAmount();case 2:case"end":return t.stop()}}),t)})))()},methods:{required:o.g,quantity:o.f,addItem:function(){this.selectedProducts.push({product:null,qty:1,unit:null,price:null,amount:null,variants:[],variant:null})},setAmount:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.type="Credit"===e.order.payment_type,e.total=e.order.amount,e.discount=e.order.discount,e.balance=e.order.balance_due,e.recieved=e.order.amount-e.order.balance_due,n=l(e.selectedProducts),t.prev=6,n.s();case 8:if((r=n.n()).done){t.next=17;break}return(o=r.value).amount=o.qty*o.price,t.next=13,e.$axios.$get("variant/item/"+o.item_id);case 13:o.variants=t.sent,console.log(o);case 15:t.next=8;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(6),n.e(t.t0);case 22:return t.prev=22,n.f(),t.finish(22);case 25:e.selectedProducts=Array.from(e.selectedProducts);case 26:case"end":return t.stop()}}),t,null,[[6,19,22,25]])})))()},getBranches:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("branch");case 2:e.branches=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getCustomers:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("customer");case 2:e.customers=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getProducts:function(i){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("item/filter/"+i);case 2:e.products=t.sent;case 3:case"end":return t.stop()}}),t)})))()},productChanged:function(i,e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.selectedProducts.indexOf(e),t.selectedProducts[r].variant=null,n.next=4,t.$axios.$get("variant/item/"+i.id);case 4:t.selectedProducts[r].variants=n.sent,t.selectedProducts[r].variants.length>0?(t.selectedProducts[r].variant=t.selectedProducts[r].variants[0],t.selectedProducts[r].price=t.selectedProducts[r].variant.sale_price):(t.selectedProducts[r].variant=null,t.selectedProducts[r].price=i.sale_price),t.selectedProducts[r].product=i,t.selectedProducts[r].unit=i.unit.name,t.selectedProducts[r].amount=t.selectedProducts[r].price*t.selectedProducts[r].qty,t.getTotal(),t.checkBalance();case 11:case"end":return n.stop()}}),n)})))()},quantityChanged:function(e){console.log(e),e.variants.length>0?e.qty<=e.variant.stock?console.log("its ok"):console.log("error"):e.qty<e.stock?console.log("its ok"):console.log("error"),e&&(e.amount=parseInt(e.price)*parseInt(e.qty),this.selectedProducts=Array.from(this.selectedProducts),this.getTotal(),this.checkBalance())},variantChanged:function(e){var t=this.selectedProducts.indexOf(e);this.selectedProducts[t].price=this.selectedProducts[t].variant.sale_price,this.selectedProducts[t].amount=this.selectedProducts[t].price*this.selectedProducts[t].qty,this.getTotal(),this.checkBalance()},removeItem:function(e){var t=this.selectedProducts.indexOf(e);this.selectedProducts.length>1&&this.selectedProducts.splice(t,1),this.getTotal(),this.checkBalance()},getTotal:function(){var e,t=0,n=l(this.selectedProducts);try{for(n.s();!(e=n.n()).done;){var r=e.value;t+=parseInt(r.amount)}}catch(e){n.e(e)}finally{n.f()}this.total=t},checkBalance:function(){this.balance=this.total-this.received},discountApply:function(){this.getTotal(),this.total=this.total-this.discount},formData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=14;break}(data={}).customer=e.order.customer?e.order.customer.id:null,data.billingAddress=e.order.billing_address,data.amount=e.total,data.discount=e.discount,e.type&&(data.balance=e.balance),data.items=[],n=l(e.selectedProducts);try{for(n.s();!(r=n.n()).done;)o=r.value,data.items.push({item:o})}catch(e){n.e(e)}finally{n.f()}return console.log(data),t.next=13,e.$axios.$post("saleOrder/update/"+e.order.id,data);case 13:e.$router.back();case 14:case"end":return t.stop()}}),t)})))()}}},v=(n(746),n(51)),f=n(68),x=n.n(f),h=n(545),m=n(499),_=n(758),y=n(533),w=n(129),k=n(505),O=n(755),A=n(496),$=n(555),P=n(46),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sale-order-main"},[n("v-form",{ref:"form"},[n("div",{staticClass:"sale-order-customer"},[n("div",{staticClass:"sale-order-customer-form"},[n("div",{staticClass:"sale-order-customer-name"},[n("v-autocomplete",{staticStyle:{margin:"0 3px",width:"calc(60% - 3px)"},attrs:{outlined:"",dense:"",flat:"",rules:["Credit"!==e.order.payment_type||e.required],label:"Credit"===e.order.payment_type?"Customer *":"Customer (Optional)",items:e.customers,"item-text":"name",hint:e.order.customer?e.order.customer.balance?"Bal: "+e.order.customer.balance:"Bal: 0.0":"","persistent-hint":"","item-value":function(e){return e},readonly:""},model:{value:e.order.customer,callback:function(t){e.$set(e.order,"customer",t)},expression:"order.customer"}})],1),e._v(" "),n("div",{staticClass:"sale-order-customer-address"},[n("v-textarea",{staticStyle:{margin:"0 3px",width:"calc(60% - 3px)"},attrs:{label:"Billing Address","hide-details":"",rows:"3",dense:"",outlined:""},model:{value:e.order.billing_address,callback:function(t){e.$set(e.order,"billing_address",t)},expression:"order.billing_address"}})],1)]),e._v(" "),n("v-spacer"),e._v(" "),n("div",{staticClass:"sale-order-customer-invoice"},[n("div",{staticStyle:{display:"flex"}},[n("label",{staticStyle:{width:"50%"}},[e._v("Invoice Number")]),e._v(" "),n("v-text-field",{staticStyle:{margin:"0"},attrs:{readonly:"",dense:""},model:{value:e.order.invoice_id,callback:function(t){e.$set(e.order,"invoice_id",t)},expression:"order.invoice_id"}})],1),e._v(" "),n("div",{staticStyle:{display:"flex"}},[n("label",{staticStyle:{width:"50%"}},[e._v("Invoice Date")]),e._v(" "),n("v-text-field",{staticStyle:{margin:"0"},attrs:{readonly:"",rules:[e.required],dense:"",type:"date"},model:{value:e.order.invoice_date,callback:function(t){e.$set(e.order,"invoice_date",t)},expression:"order.invoice_date"}})],1),e._v(" "),n("v-autocomplete",{attrs:{readonly:"",dense:"",rules:[e.required],items:e.branches,"item-text":"name","item-value":"id",label:"Branch",placeholder:"Search a Branch"},on:{change:function(t){e.getProducts(t)}},model:{value:e.order.branch_id,callback:function(t){e.$set(e.order,"branch_id",t)},expression:"order.branch_id"}})],1)],1),e._v(" "),n("div",{staticClass:"sale-order-items"},[n("v-data-table",{attrs:{headers:e.columns,items:e.selectedProducts,"disable-pagination":"","hide-default-footer":""},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-switch",{attrs:{readonly:"",label:"Credit"===e.order.payment_type?"Credit":"Cash","hide-details":""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",staticStyle:{"margin-bottom":"0 !important"},attrs:{color:"primary",dark:"",elevation:"0"},on:{click:e.addItem}},[e._v("Add Item")])],1)]},proxy:!0},{key:"item.count",fn:function(t){var r=t.item;return[n("p",{staticStyle:{margin:"0"}},[e._v(e._s(e.selectedProducts.indexOf(r)+1))])]}},{key:"item.actions",fn:function(t){var r=t.item;return[e.selectedProducts.length>1?n("v-icon",{attrs:{color:"red"},on:{click:function(t){return e.removeItem(r)}}},[e._v("mdi-delete")]):e._e()]}},{key:"item.product",fn:function(t){var r=t.item;return[n("div",{class:{variantField:r.variants&&r.variants.length>0}},[n("v-autocomplete",{attrs:{value:r.product,outlined:"",dense:"",readonly:r.id,rules:[e.required],"hide-details":"",flat:"",items:e.products,"item-text":"name","value-comparator":function(a,b){return a&&b&&a.id===b.id},"item-value":function(e){return e}},on:{change:function(t){return e.productChanged(t,r)}},scopedSlots:e._u([{key:"no-data",fn:function(){return[n("p",{staticStyle:{margin:"0","text-align":"center"}},[e._v("\n                  "+e._s(e.order.branch_id?"No Products Found":"Please Select Branch First")+"\n                ")])]},proxy:!0}],null,!0),model:{value:r.product,callback:function(t){e.$set(r,"product",t)},expression:"item.product"}}),e._v(" "),r.variants&&r.variants.length>0?n("v-autocomplete",{attrs:{outlined:"",dense:"",readonly:r.id,rules:[e.required],"hide-details":"",flat:"",items:r.variants,"value-comparator":function(a,b){return a&&b&&a.id===b.id},"item-text":"name","item-value":function(e){return e}},on:{change:function(t){return e.variantChanged(r)}},model:{value:r.variant,callback:function(t){e.$set(r,"variant",t)},expression:"item.variant"}}):e._e()],1)]}},{key:"item.qty",fn:function(t){var r=t.item;return[n("v-text-field",{attrs:{dense:"",outlined:"","hide-details":"",type:"number",rules:[e.required,e.quantity]},on:{change:function(t){return e.quantityChanged(r)}},model:{value:r.qty,callback:function(t){e.$set(r,"qty",t)},expression:"item.qty"}})]}}])})],1),e._v(" "),n("div",{staticClass:"sale-order-total"},[n("v-spacer"),e._v(" "),n("div",{staticStyle:{width:"30%"}},[n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr","margin-bottom":"5px"}},[n("label",[e._v("Total")]),e._v(" "),n("v-text-field",{attrs:{readonly:"",outlined:"",dense:"","hide-details":"",placeholder:"0.0"},model:{value:e.total,callback:function(t){e.total=t},expression:"total"}})],1),e._v(" "),n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr","margin-bottom":"5px"}},[n("label",[e._v("Discount")]),e._v(" "),n("v-text-field",{attrs:{rules:[function(t){return t<=e.total||"Discount is Invalid"}],dense:"","hide-details":"",outlined:"",placeholder:"0.0"},on:{change:e.discountApply},model:{value:e.discount,callback:function(t){e.discount=t},expression:"discount"}})],1),e._v(" "),e.type?n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr","margin-bottom":"5px"}},[n("label",[e._v("Received")]),e._v(" "),n("v-text-field",{attrs:{value:e.received,outlined:"",dense:"","hide-details":"",placeholder:"0.0"},on:{change:e.checkBalance},model:{value:e.received,callback:function(t){e.received=t},expression:"received"}})],1):e._e(),e._v(" "),e.type?n("div",{staticStyle:{display:"grid","grid-template-columns":"1fr 1fr","margin-bottom":"5px"}},[n("label",[e._v("Balance")]),e._v(" "),n("v-text-field",{attrs:{readonly:"",outlined:"",dense:"","hide-details":"",placeholder:"0.0"},model:{value:e.balance,callback:function(t){e.balance=t},expression:"balance"}})],1):e._e()])],1),e._v(" "),n("v-toolbar",{attrs:{flat:"",dense:""}},[n("div"),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",staticStyle:{"margin-bottom":"0 !important"},attrs:{color:"primary",dark:"",elevation:"0"},on:{click:e.formData}},[e._v("Update")])],1)],1)],1)}),[],!1,null,null,null),j=component.exports;x()(component,{VAutocomplete:h.a,VBtn:m.a,VDataTable:_.a,VForm:y.a,VIcon:w.a,VSpacer:k.a,VSwitch:O.a,VTextField:A.a,VTextarea:$.a,VToolbar:P.a});var S={name:"Id",components:{EditSaleOrder:j},asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$axios,r=e.route,t.next=3,n.$get("saleOrder/"+r.params.id);case 3:return o=t.sent,t.next=6,n.$get("saleOrderItems/saleOrder/"+r.params.id);case 6:return l=t.sent,t.abrupt("return",{order:o,orderItems:l});case 8:case"end":return t.stop()}}),t)})))()}},I=Object(v.a)(S,(function(){var e=this.$createElement;return(this._self._c||e)("EditSaleOrder",{attrs:{order:this.order,"selected-products":this.orderItems}})}),[],!1,null,"5ab03117",null);t.default=I.exports}}]);